<article class="overflow-hidden rounded-2xl border border-white/10 bg-slate-900/70 shadow-xl shadow-slate-950/30 backdrop-blur-sm">
  <button
    type="button"
    class="group flex w-full items-center justify-between gap-4 px-5 py-4 text-left transition hover:bg-white/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-400"
    [attr.aria-expanded]="expanded()"
    [attr.aria-controls]="'product-panel-' + product().id"
    (click)="onToggle()"
  >
    <div class="min-w-0">
      <p class="font-display truncate text-lg font-semibold text-slate-100">{{ product().name }}</p>
      <p class="mt-1 line-clamp-2 text-sm text-slate-300">{{ product().description }}</p>
      <p class="mt-2 text-xs uppercase tracking-[0.14em] text-slate-400">
        {{ componentCount() }} components
      </p>
    </div>

    <div class="flex flex-shrink-0 items-center gap-3">
      <app-status-badge [status]="product().status" />
      <span
        class="inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/15 text-slate-200 transition group-hover:border-cyan-300/70 group-hover:text-cyan-100"
      >
        {{ expanded() ? 'âˆ’' : '+' }}
      </span>
    </div>
  </button>

  @if (expanded()) {
    <div
      class="border-t border-white/10 bg-slate-950/40 px-5 py-4"
      [id]="'product-panel-' + product().id"
      role="region"
      [attr.aria-label]="product().name + ' components'"
    >
      <div class="grid gap-3 lg:grid-cols-2">
        @for (component of product().components; track component.id) {
          <app-component-status-card [component]="component" />
        }
      </div>
    </div>
  }
</article>
